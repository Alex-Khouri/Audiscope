rmdir /s /q "Classes"
mkdir "Classes"
javac -classpath "./JAR/*" -d "Classes/" "Java/AppGUI.java" "Java/AudioData.java" "Java/ExecutionBatch.java" "Java/FileProcessingTask.java" "Java/Config.java"

cd Classes
del /F "../JAR/Audiscope.jar"
jar cfe "../JAR/Audiscope.jar" AppGUI "./"
cd ..
rmdir /s /q "Classes"

rmdir /s /q "Releases"
mkdir "Releases"
mkdir "Releases/Audiscope (Linux ARM)"
mkdir "Releases/Audiscope (Linux ARM)/CSS"
mkdir "Releases/Audiscope (Linux ARM)/JAR"
mkdir "Releases/Audiscope (Linux ARM)/JRE"
mkdir "Releases/Audiscope (Linux ARM)/JRE/Linux ARM"
mkdir "Releases/Audiscope (Linux x86)"
mkdir "Releases/Audiscope (Linux x86)/CSS"
mkdir "Releases/Audiscope (Linux x86)/JAR"
mkdir "Releases/Audiscope (Linux x86)/JRE"
mkdir "Releases/Audiscope (Linux x86)/JRE/Linux x86"
mkdir "Releases/Audiscope (Mac ARM)"
mkdir "Releases/Audiscope (Mac ARM)/CSS"
mkdir "Releases/Audiscope (Mac ARM)/JAR"
mkdir "Releases/Audiscope (Mac ARM)/JRE"
mkdir "Releases/Audiscope (Mac ARM)/JRE/Mac ARM"
mkdir "Releases/Audiscope (Mac x86)"
mkdir "Releases/Audiscope (Mac x86)/CSS"
mkdir "Releases/Audiscope (Mac x86)/JAR"
mkdir "Releases/Audiscope (Mac x86)/JRE"
mkdir "Releases/Audiscope (Mac x86)/JRE/Mac x86"
mkdir "Releases/Audiscope (Windows ARM)"
mkdir "Releases/Audiscope (Windows ARM)/CSS"
mkdir "Releases/Audiscope (Windows ARM)/JAR"
mkdir "Releases/Audiscope (Windows ARM)/JRE"
mkdir "Releases/Audiscope (Windows ARM)/JRE/Windows ARM"
mkdir "Releases/Audiscope (Windows x86)"
mkdir "Releases/Audiscope (Windows x86)/CSS"
mkdir "Releases/Audiscope (Windows x86)/JAR"
mkdir "Releases/Audiscope (Windows x86)/JRE"
mkdir "Releases/Audiscope (Windows x86)/JRE/Windows x86"

xcopy /e /i /q /y "CSS/." "Releases/Audiscope (Linux ARM)/CSS/"
xcopy /e /i /q /y "CSS/." "Releases/Audiscope (Linux x86)/CSS/"
xcopy /e /i /q /y "CSS/." "Releases/Audiscope (Mac ARM)/CSS/"
xcopy /e /i /q /y "CSS/." "Releases/Audiscope (Mac x86)/CSS/"
xcopy /e /i /q /y "CSS/." "Releases/Audiscope (Windows ARM)/CSS/"
xcopy /e /i /q /y "CSS/." "Releases/Audiscope (Windows x86)/CSS/"

xcopy /e /i /q /y "JAR/." "Releases/Audiscope (Linux ARM)/JAR/"
xcopy /e /i /q /y "JAR/." "Releases/Audiscope (Linux x86)/JAR/"
xcopy /e /i /q /y "JAR/." "Releases/Audiscope (Mac ARM)/JAR/"
xcopy /e /i /q /y "JAR/." "Releases/Audiscope (Mac x86)/JAR/"
xcopy /e /i /q /y "JAR/." "Releases/Audiscope (Windows ARM)/JAR/"
xcopy /e /i /q /y "JAR/." "Releases/Audiscope (Windows x86)/JAR/"

unzip "JRE/Linux ARM.zip" -d "Releases/Audiscope (Linux ARM)/JRE/"
unzip "JRE/Linux x86.zip" -d "Releases/Audiscope (Linux x86)/JRE/"
unzip "JRE/Mac ARM.zip" -d "Releases/Audiscope (Mac ARM)/JRE/"
unzip "JRE/Mac x86.zip" -d "Releases/Audiscope (Mac x86)/JRE/"
unzip "JRE/Windows ARM.zip" -d "Releases/Audiscope (Windows ARM)/JRE/"
unzip "JRE/Windows x86.zip" -d "Releases/Audiscope (Windows x86)/JRE/"

@REM Delete large, unused JRE files from releases
del /f "Releases/Audiscope (Linux ARM)/JRE/Linux ARM/lib/libjfxwebkit.so"
del /f "Releases/Audiscope (Linux x86)/JRE/Linux x86/lib/libjfxwebkit.so"
del /f "Releases/Audiscope (Mac ARM)/JRE/Mac ARM/lib/libjfxwebkit.dylib"
del /f "Releases/Audiscope (Mac x86)/JRE/Mac x86/lib/libjfxwebkit.dylib"
del /f "Releases/Audiscope (Windows x86)/JRE/Windows x86/bin/jfxwebkit.dll"

xcopy /q /y "Scripts/Run/Linux/run_linux_arm.sh" "Releases/Audiscope (Linux ARM)/Audiscope.sh"
xcopy /q /y "Scripts/Run/Linux/run_linux_x86.sh" "Releases/Audiscope (Linux x86)/Audiscope.sh"
xcopy /q /y "Scripts/Run/Mac/run_mac_arm.command" "Releases/Audiscope (Mac ARM)/Audiscope.command"
xcopy /q /y "Scripts/Run/Mac/run_mac_x86.command" "Releases/Audiscope (Mac x86)/Audiscope.command"
xcopy /q /y "Scripts/Run/Windows/run_windows_arm.bat" "Releases/Audiscope (Windows ARM)/Audiscope.bat"
xcopy /q /y "Scripts/Run/Windows/run_windows_x86.bat" "Releases/Audiscope (Windows x86)/Audiscope.bat"

xcopy /q /y "readme.txt" "Releases/Audiscope (Linux ARM)/readme.txt"
xcopy /q /y "readme.txt" "Releases/Audiscope (Linux x86)/readme.txt"
xcopy /q /y "readme.txt" "Releases/Audiscope (Mac ARM)/readme.txt"
xcopy /q /y "readme.txt" "Releases/Audiscope (Mac x86)/readme.txt"
xcopy /q /y "readme.txt" "Releases/Audiscope (Windows ARM)/readme.txt"
xcopy /q /y "readme.txt" "Releases/Audiscope (Windows x86)/readme.txt"

pushd "Releases"

tar --exclude="*.DS_Store" -cf "Audiscope (Linux ARM).zip" "Audiscope (Linux ARM)"
tar --exclude="*.DS_Store" -cf "Audiscope (Linux x86).zip" "Audiscope (Linux x86)"
tar --exclude="*.DS_Store" -cf "Audiscope (Mac ARM).zip" "Audiscope (Mac ARM)"
tar --exclude="*.DS_Store" -cf "Audiscope (Mac x86).zip" "Audiscope (Mac x86)"
tar --exclude="*.DS_Store" -cf "Audiscope (Windows ARM).zip" "Audiscope (Windows ARM)"
tar --exclude="*.DS_Store" -cf "Audiscope (Windows x86).zip" "Audiscope (Windows x86)"

rmdir /s /q "Audiscope (Linux ARM)"
rmdir /s /q "Audiscope (Linux x86)"
rmdir /s /q "Audiscope (Mac ARM)"
rmdir /s /q "Audiscope (Mac x86)"
rmdir /s /q "Audiscope (Windows ARM)"
rmdir /s /q "Audiscope (Windows x86)"

popd